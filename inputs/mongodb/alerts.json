[
  {
    "name": "Mongo出现Assert错误",
    "note": "",
    "prod": "",
    "algorithm": "",
    "algo_params": null,
    "delay": 0,
    "severity": 3,
    "disabled": 0,
    "prom_for_duration": 1800,
    "prom_ql": "rate(mongodb_ss_asserts{assert_type=~\"regular|message\"}[5m]) > 0",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [],
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": [
      "alertname=MongoAssertsDetected"
    ]
  },
  {
    "name": "Mongo出现游标超时",
    "note": "",
    "prod": "",
    "algorithm": "",
    "algo_params": null,
    "delay": 0,
    "severity": 2,
    "disabled": 0,
    "prom_for_duration": 1800,
    "prom_ql": "rate(mongodb_ss_metrics_cursor_timedOut[5m]) > 0",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [],
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": [
      "alertname=MongoRecurrentCursorTimeout"
    ]
  },
  {
    "name": "Mongo出现页错误中断",
    "note": "",
    "prod": "",
    "algorithm": "",
    "algo_params": null,
    "delay": 0,
    "severity": 2,
    "disabled": 0,
    "prom_for_duration": 1800,
    "prom_ql": "rate(mongodb_ss_extra_info_page_faults[5m]) > 0",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [],
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": [
      "alertname=MongoRecurrentMemoryPageFaults"
    ]
  },
  {
    "name": "Mongo刚刚有重启，请注意",
    "note": "",
    "prod": "",
    "algorithm": "",
    "algo_params": null,
    "delay": 0,
    "severity": 3,
    "disabled": 0,
    "prom_for_duration": 0,
    "prom_ql": "mongodb_ss_uptime < 60",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [],
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": [
      "alertname=MongoRestarted"
    ]
  },
  {
    "name": "Mongo副本集主从延迟超过30s",
    "note": "",
    "prod": "",
    "algorithm": "",
    "algo_params": null,
    "delay": 0,
    "severity": 1,
    "disabled": 0,
    "prom_for_duration": 60,
    "prom_ql": "mongodb_mongod_replset_member_replication_lag > 30",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [],
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": [
      "alertname=MongoSlaveReplicationLag(>30s)"
    ]
  },
  {
    "name": "Mongo实例挂了",
    "note": "",
    "prod": "",
    "algorithm": "",
    "algo_params": null,
    "delay": 0,
    "severity": 1,
    "disabled": 0,
    "prom_for_duration": 0,
    "prom_ql": "mongodb_up < 1",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [],
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": [
      "alertname=MongoServerDown"
    ]
  },
  {
    "name": "Mongo操作平均耗时超过250秒",
    "note": "",
    "prod": "",
    "algorithm": "",
    "algo_params": null,
    "delay": 0,
    "severity": 2,
    "disabled": 0,
    "prom_for_duration": 600,
    "prom_ql": "rate(mongodb_ss_opLatencies_latency[5m]) / rate(mongodb_ss_opLatencies_ops[5m]) > 250000",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [],
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": [
      "alertname=MongoOperationHighLatency"
    ]
  },
  {
    "name": "Mongo连接数已超过80%",
    "note": "",
    "prod": "",
    "algorithm": "",
    "algo_params": null,
    "delay": 0,
    "severity": 2,
    "disabled": 0,
    "prom_for_duration": 120,
    "prom_ql": "avg by (instance) (mongodb_ss_connections{conn_type=\"current\"}) / avg by (instance) (mongodb_ss_connections{conn_type=\"available\"}) * 100 > 80",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [],
    "notify_repeat_step": 60,
    "notify_max_number": 0,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": [
      "alertname=MongoTooManyConnections(>80%)"
    ]
  }
]